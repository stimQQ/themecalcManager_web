<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>计算器皮肤主题管理系统</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- 加载指示器 -->
    <div id="loading-indicator">
        <div class="loader"></div>
    </div>
    
    <!-- 侧边栏切换按钮（移动端显示） -->
    <button id="toggle-sidebar" class="toggle-sidebar">☰</button>
    
    <!-- 页面容器 -->
    <div class="page-container">
        <!-- 左侧导航栏 -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-brand">主题管理系统</div>
            </div>
            
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#" class="nav-link active" data-target="theme-list-page">
                        <i>📋</i> 主题管理
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-target="theme-create-page" id="theme-create-link">
                        <i>➕</i> 主题创建
                    </a>
                    <ul class="submenu" id="theme-create-submenu">
                        <li class="submenu-item">
                            <a href="#" class="submenu-link" data-step="basic-info-step">基本信息</a>
                        </li>
                        <li class="submenu-item">
                            <a href="#" class="submenu-link" data-step="global-settings-step">全局设置</a>
                        </li>
                        <li class="submenu-item">
                            <a href="#" class="submenu-link" data-step="top-nav-step">顶部导航区</a>
                        </li>
                        <li class="submenu-item">
                            <a href="#" class="submenu-link" data-step="result-area-step">计算结果区设置</a>
                        </li>
                        <li class="submenu-item">
                            <a href="#" class="submenu-link" data-step="button-skins-step">按钮皮肤设置</a>
                        </li>
                        <li class="submenu-item">
                            <a href="#" class="submenu-link" data-step="tabbar-settings-step">TabBar设置</a>
                        </li>
                        <li class="submenu-item">
                            <a href="#" class="submenu-link" data-step="summary-step">确认提交</a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
        
        <!-- 主要内容 -->
        <div class="main-content-wrapper">
            <!-- 头部 -->
            <header>
                <div class="container header-container">
                    <div class="logo">计算器皮肤主题管理系统</div>
                    <div class="user-info">
                        <button id="logout-button" class="btn">退出登录</button>
                    </div>
                </div>
            </header>
            
            <!-- 主要内容区域 -->
            <div class="container">
                <!-- 消息显示区域 -->
                <div id="message" class="message"></div>
                
                <!-- 主题列表页面 -->
                <div id="theme-list-page" class="page-content">
                    <div class="main-content">
                        <!-- 工具栏 -->
                        <div class="toolbar">
                            <form id="search-form" class="search-form">
                                <input type="text" id="search-input" placeholder="搜索主题名称或创建者">
                                <select id="filter-paid">
                                    <option value="">全部主题</option>
                                    <option value="true">付费主题</option>
                                    <option value="false">免费主题</option>
                                </select>
                                <button type="submit" class="btn">搜索</button>
                                <button type="button" id="reset-search" class="btn">重置</button>
                            </form>
                            
                            <div class="action-buttons">
                                <button id="new-theme-button" class="btn">创建新主题</button>
                            </div>
                        </div>
                        
                        <!-- 主题列表 -->
                        <div id="theme-list" class="theme-list">
                            <!-- 主题卡片将通过JavaScript动态添加 -->
                            <div class="no-themes">加载中...</div>
                        </div>
                        
                        <!-- 分页 -->
                        <div id="pagination" class="pagination"></div>
                    </div>
                </div>
                
                <!-- 主题创建页面 -->
                <div id="theme-create-page" class="page-content" style="display: none;">
                    <div class="main-content">
                        <h2>创建新主题</h2>
                        
                        <!-- 步骤导航 -->
                        <div class="steps-nav">
                            <div class="step-link active" data-step="basic-info-step">1. 基本信息</div>
                            <div class="step-link" data-step="global-settings-step">2. 全局设置</div>
                            <div class="step-link" data-step="top-nav-step">3. 顶部导航区</div>
                            <div class="step-link" data-step="result-area-step">4. 计算结果区</div>
                            <div class="step-link" data-step="button-skins-step">5. 按钮皮肤</div>
                            <div class="step-link" data-step="tabbar-settings-step">6. TabBar设置</div>
                            <div class="step-link" data-step="summary-step">7. 确认提交</div>
                        </div>
                        
                        <!-- 加载中 -->
                        <div id="step-loading" style="display: none;">
                            <div class="loader"></div>
                        </div>
                        
                        <form id="theme-creation-form">
                            <!-- 隐藏字段：主题ID，编辑时使用 -->
                            <input type="hidden" id="theme-id" name="theme_id">
                            <!-- 隐藏字段：用于背景类型选择 -->
                            <input type="hidden" id="has_global_background_image" name="has_global_background_image" value="false">
                            <input type="hidden" id="result_use_image" name="result_use_image" value="false">
                            <input type="hidden" id="tabbar_use_background_image" name="tabbar_use_background_image" value="false">
                            
                            <!-- 步骤1: 基本信息 -->
                            <div id="basic-info-step" class="step-content active">
                                <div class="form-group">
                                    <label for="skin_name">主题名称 *</label>
                                    <input type="text" id="skin_name" name="skin_name" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="version">版本号</label>
                                    <input type="text" id="version" name="version" value="1.0">
                                </div>
                                
                                <div class="form-group checkbox-group">
                                    <input type="checkbox" id="is_paid" name="is_paid">
                                    <label for="is_paid">付费主题</label>
                                </div>
                                
                                <div class="form-group">
                                    <label for="detail_image">详情图片</label>
                                    <input type="file" id="detail_image" name="detail_image" accept="image/*">
                                    <img id="detail-image-preview" class="image-preview">
                                </div>
                                
                                <div class="step-buttons">
                                    <button type="button" class="btn cancel-btn" id="cancel-theme-button">取消</button>
                                    <button type="button" class="btn next-step" data-next="global-settings-step">保存并继续</button>
                                </div>
                            </div>
                            
                            <!-- 步骤2: 全局设置 -->
                            <div id="global-settings-step" class="step-content">
                                <div class="form-group">
                                    <label>全局背景设置</label>
                                    <div class="radio-group">
                                        <div class="radio-item">
                                            <input type="radio" id="global_bg_color_option" name="global_bg_type" value="color" checked>
                                            <label for="global_bg_color_option">使用背景颜色</label>
                                        </div>
                                        <div class="radio-item">
                                            <input type="radio" id="global_bg_image_option" name="global_bg_type" value="image">
                                            <label for="global_bg_image_option">使用背景图片</label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-group" id="global_bg_color_group">
                                    <label for="global_background_color">全局背景颜色</label>
                                    <div class="color-input-group">
                                        <input type="color" id="global_background_color" name="global_background_color" value="#FFFFFF">
                                        <input type="text" id="global_background_color_text" placeholder="#FFFFFF" maxlength="7">
                                    </div>
                                </div>
                                
                                <div class="form-group" id="global_bg_image_group" style="display: none;">
                                    <label for="global_background_image">全局背景图片</label>
                                    <input type="file" id="global_background_image" name="global_background_image" accept="image/*">
                                    <img id="global-background-preview" class="image-preview">
                                </div>
                                
                                <div class="form-group checkbox-group">
                                    <input type="checkbox" id="use_system_font" name="use_system_font" checked>
                                    <label for="use_system_font">使用系统字体</label>
                                </div>
                                
                                <div class="step-buttons">
                                    <button type="button" class="btn prev-step" data-prev="basic-info-step">上一步</button>
                                    <button type="button" class="btn next-step" data-next="top-nav-step">保存并继续</button>
                                </div>
                            </div>
                            
                            <!-- 步骤3: 顶部导航区 -->
                            <div id="top-nav-step" class="step-content">
                                <div class="form-group">
                                    <label for="top_nav_selected_color">导航选中颜色</label>
                                    <div class="color-input-group">
                                        <input type="color" id="top_nav_selected_color" name="top_nav_selected_color" value="#4a6cf7">
                                        <input type="text" id="top_nav_selected_color_text" placeholder="#4A6CF7" maxlength="7">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="top_nav_unselected_color">导航未选中颜色</label>
                                    <div class="color-input-group">
                                        <input type="color" id="top_nav_unselected_color" name="top_nav_unselected_color" value="#6c757d">
                                        <input type="text" id="top_nav_unselected_color_text" placeholder="#6C757D" maxlength="7">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="top_nav_text_selected_color">文字选中颜色</label>
                                    <div class="color-input-group">
                                        <input type="color" id="top_nav_text_selected_color" name="top_nav_text_selected_color" value="#FFFFFF">
                                        <input type="text" id="top_nav_text_selected_color_text" placeholder="#FFFFFF" maxlength="7">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="top_nav_text_unselected_color">文字未选中颜色</label>
                                    <div class="color-input-group">
                                        <input type="color" id="top_nav_text_unselected_color" name="top_nav_text_unselected_color" value="#CCCCCC">
                                        <input type="text" id="top_nav_text_unselected_color_text" placeholder="#CCCCCC" maxlength="7">
                                    </div>
                                </div>
                                
                                <div class="step-buttons">
                                    <button type="button" class="btn prev-step" data-prev="global-settings-step">上一步</button>
                                    <button type="button" class="btn next-step" data-next="result-area-step">保存并继续</button>
                                </div>
                            </div>
                            
                            <!-- 步骤4: 计算结果区设置 -->
                            <div id="result-area-step" class="step-content">
                                <div class="form-group">
                                    <label>结果区域背景设置</label>
                                    <div class="radio-group">
                                        <div class="radio-item">
                                            <input type="radio" id="result_bg_color_option" name="result_bg_type" value="color" checked>
                                            <label for="result_bg_color_option">使用背景颜色</label>
                                        </div>
                                        <div class="radio-item">
                                            <input type="radio" id="result_bg_image_option" name="result_bg_type" value="image">
                                            <label for="result_bg_image_option">使用背景图片</label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-group" id="result_bg_color_group">
                                    <label for="result_background_color">结果区域背景颜色 *</label>
                                    <div class="color-input-group">
                                        <input type="color" id="result_background_color" name="result_background_color" value="#F5F5F5" required>
                                        <input type="text" id="result_background_color_text" placeholder="#F5F5F5" maxlength="7">
                                    </div>
                                </div>
                                
                                <div class="form-group" id="result_bg_image_group" style="display: none;">
                                    <label for="result_background_image">结果区域背景图片</label>
                                    <input type="file" id="result_background_image" name="result_background_image" accept="image/*">
                                    <img id="result-background-preview" class="image-preview">
                                </div>
                                
                                <div class="form-group">
                                    <label for="result_font_color">结果字体颜色</label>
                                    <div class="color-input-group">
                                        <input type="color" id="result_font_color" name="result_font_color" value="#000000">
                                        <input type="text" id="result_font_color_text" placeholder="#000000" maxlength="7">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="result_font_size">结果字体大小</label>
                                    <input type="number" id="result_font_size" name="result_font_size" value="24" min="12" max="40" required>
                                    <span class="form-tip">字体大小范围为：12pt-40pt</span>
                                </div>
                                
                                <div class="step-buttons">
                                    <button type="button" class="btn prev-step" data-prev="top-nav-step">上一步</button>
                                    <button type="button" class="btn next-step" data-next="button-skins-step">保存并继续</button>
                                </div>
                            </div>
                            
                            <!-- 步骤5: 按钮皮肤设置 -->
                            <div id="button-skins-step" class="step-content">
                                <!-- 按钮类型导航 -->
                                <div class="button-types-nav">
                                    <div class="button-type-link active" data-button-type="button-type-a">A类 - 功能按钮</div>
                                    <div class="button-type-link" data-button-type="button-type-b">B类 - 运算符按钮</div>
                                    <div class="button-type-link" data-button-type="button-type-c">C类 - 数字按钮</div>
                                    <div class="button-type-link" data-button-type="button-type-d">D类 - 等号按钮</div>
                                    <div class="button-type-link" data-button-type="button-type-e">E类 - 科学功能按钮</div>
                                    <div class="button-type-link" data-button-type="button-type-f">F类 - 科学计算器功能按钮</div>
                                    <div class="button-type-link" data-button-type="button-type-g">G类 - 科学计算器运算符按钮</div>
                                    <div class="button-type-link" data-button-type="button-type-h">H类 - 科学计算器数字按钮</div>
                                    <div class="button-type-link" data-button-type="button-type-i">I类 - 科学计算器等号按钮</div>
                                </div>
                                
                                <!-- A类按钮设置（默认显示） -->
                                <div id="button-type-a-settings" class="button-type-settings">
                                    <h3>A类功能按钮(AC, ±, %)</h3>
                                    
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="button_TYPE_A_use_image" name="button_TYPE_A_use_image">
                                        <label for="button_TYPE_A_use_image">使用按钮图片</label>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_A_pressed_image">按下状态图片</label>
                                        <input type="file" id="button_TYPE_A_pressed_image" name="button_TYPE_A_pressed_image" accept="image/*">
                                        <img id="button-a-pressed-preview" class="image-preview">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_A_released_image">释放状态图片</label>
                                        <input type="file" id="button_TYPE_A_released_image" name="button_TYPE_A_released_image" accept="image/*">
                                        <img id="button-a-released-preview" class="image-preview">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_A_pressed_color">按下状态颜色</label>
                                        <div class="color-input-group">
                                            <input type="color" id="button_TYPE_A_pressed_color" name="button_TYPE_A_pressed_color" value="#D0D0D0">
                                            <input type="text" id="button_TYPE_A_pressed_color_text" placeholder="#D0D0D0" maxlength="7">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_A_released_color">释放状态颜色</label>
                                        <div class="color-input-group">
                                            <input type="color" id="button_TYPE_A_released_color" name="button_TYPE_A_released_color" value="#E0E0E0">
                                            <input type="text" id="button_TYPE_A_released_color_text" placeholder="#E0E0E0" maxlength="7">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_A_font_color">字体颜色</label>
                                        <div class="color-input-group">
                                            <input type="color" id="button_TYPE_A_font_color" name="button_TYPE_A_font_color" value="#000000">
                                            <input type="text" id="button_TYPE_A_font_color_text" placeholder="#000000" maxlength="7">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_A_font_size">字体大小</label>
                                        <input type="number" id="button_TYPE_A_font_size" name="button_TYPE_A_font_size" value="18" min="12" max="36" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="sound_TYPE_A">按钮音效</label>
                                        <input type="file" id="sound_TYPE_A" name="sound_TYPE_A" accept="audio/*">
                                        <div class="sound-preview">
                                            <audio id="sound-a-preview" class="sound-player" controls></audio>
                                            <button type="button" id="clear-sound-a" class="clear-sound">清除</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- B类按钮设置 -->
                                <div id="button-type-b-settings" class="button-type-settings">
                                    <h3>B类运算符按钮(÷, ×, -, +)</h3>
                                    
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="button_TYPE_B_use_image" name="button_TYPE_B_use_image">
                                        <label for="button_TYPE_B_use_image">使用按钮图片</label>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_B_pressed_image">按下状态图片</label>
                                        <input type="file" id="button_TYPE_B_pressed_image" name="button_TYPE_B_pressed_image" accept="image/*">
                                        <img id="button-b-pressed-preview" class="image-preview">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_B_released_image">释放状态图片</label>
                                        <input type="file" id="button_TYPE_B_released_image" name="button_TYPE_B_released_image" accept="image/*">
                                        <img id="button-b-released-preview" class="image-preview">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_B_pressed_color">按下状态颜色</label>
                                        <div class="color-input-group">
                                            <input type="color" id="button_TYPE_B_pressed_color" name="button_TYPE_B_pressed_color" value="#4287f5">
                                            <input type="text" id="button_TYPE_B_pressed_color_text" placeholder="#4287f5" maxlength="7">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_B_released_color">释放状态颜色</label>
                                        <div class="color-input-group">
                                            <input type="color" id="button_TYPE_B_released_color" name="button_TYPE_B_released_color" value="#4a9af5">
                                            <input type="text" id="button_TYPE_B_released_color_text" placeholder="#4a9af5" maxlength="7">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_B_font_color">字体颜色</label>
                                        <div class="color-input-group">
                                            <input type="color" id="button_TYPE_B_font_color" name="button_TYPE_B_font_color" value="#FFFFFF">
                                            <input type="text" id="button_TYPE_B_font_color_text" placeholder="#FFFFFF" maxlength="7">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_B_font_size">字体大小</label>
                                        <input type="number" id="button_TYPE_B_font_size" name="button_TYPE_B_font_size" value="18" min="12" max="36" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="sound_TYPE_B">按钮音效</label>
                                        <input type="file" id="sound_TYPE_B" name="sound_TYPE_B" accept="audio/*">
                                        <div class="sound-preview">
                                            <audio id="sound-b-preview" class="sound-player" controls></audio>
                                            <button type="button" id="clear-sound-b" class="clear-sound">清除</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- C类按钮设置 -->
                                <div id="button-type-c-settings" class="button-type-settings">
                                    <h3>C类数字按钮(0-9, .)</h3>
                                    
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="button_TYPE_C_use_image" name="button_TYPE_C_use_image">
                                        <label for="button_TYPE_C_use_image">使用按钮图片</label>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_C_pressed_image">按下状态图片</label>
                                        <input type="file" id="button_TYPE_C_pressed_image" name="button_TYPE_C_pressed_image" accept="image/*">
                                        <img id="button-c-pressed-preview" class="image-preview">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_C_released_image">释放状态图片</label>
                                        <input type="file" id="button_TYPE_C_released_image" name="button_TYPE_C_released_image" accept="image/*">
                                        <img id="button-c-released-preview" class="image-preview">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_C_pressed_color">按下状态颜色</label>
                                        <div class="color-input-group">
                                            <input type="color" id="button_TYPE_C_pressed_color" name="button_TYPE_C_pressed_color" value="#E8E8E8">
                                            <input type="text" id="button_TYPE_C_pressed_color_text" placeholder="#E8E8E8" maxlength="7">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_C_released_color">释放状态颜色</label>
                                        <div class="color-input-group">
                                            <input type="color" id="button_TYPE_C_released_color" name="button_TYPE_C_released_color" value="#F8F8F8">
                                            <input type="text" id="button_TYPE_C_released_color_text" placeholder="#F8F8F8" maxlength="7">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_C_font_color">字体颜色</label>
                                        <div class="color-input-group">
                                            <input type="color" id="button_TYPE_C_font_color" name="button_TYPE_C_font_color" value="#000000">
                                            <input type="text" id="button_TYPE_C_font_color_text" placeholder="#000000" maxlength="7">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_C_font_size">字体大小</label>
                                        <input type="number" id="button_TYPE_C_font_size" name="button_TYPE_C_font_size" value="18" min="12" max="36" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="sound_TYPE_C">按钮音效</label>
                                        <input type="file" id="sound_TYPE_C" name="sound_TYPE_C" accept="audio/*">
                                        <div class="sound-preview">
                                            <audio id="sound-c-preview" class="sound-player" controls></audio>
                                            <button type="button" id="clear-sound-c" class="clear-sound">清除</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- D类按钮设置 -->
                                <div id="button-type-d-settings" class="button-type-settings">
                                    <h3>D类等号按钮(=)</h3>
                                    
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="button_TYPE_D_use_image" name="button_TYPE_D_use_image">
                                        <label for="button_TYPE_D_use_image">使用按钮图片</label>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_D_pressed_image">按下状态图片</label>
                                        <input type="file" id="button_TYPE_D_pressed_image" name="button_TYPE_D_pressed_image" accept="image/*">
                                        <img id="button-d-pressed-preview" class="image-preview">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_D_released_image">释放状态图片</label>
                                        <input type="file" id="button_TYPE_D_released_image" name="button_TYPE_D_released_image" accept="image/*">
                                        <img id="button-d-released-preview" class="image-preview">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_D_pressed_color">按下状态颜色</label>
                                        <div class="color-input-group">
                                            <input type="color" id="button_TYPE_D_pressed_color" name="button_TYPE_D_pressed_color" value="#ff9500">
                                            <input type="text" id="button_TYPE_D_pressed_color_text" placeholder="#ff9500" maxlength="7">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_D_released_color">释放状态颜色</label>
                                        <div class="color-input-group">
                                            <input type="color" id="button_TYPE_D_released_color" name="button_TYPE_D_released_color" value="#ffb444">
                                            <input type="text" id="button_TYPE_D_released_color_text" placeholder="#ffb444" maxlength="7">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_D_font_color">字体颜色</label>
                                        <div class="color-input-group">
                                            <input type="color" id="button_TYPE_D_font_color" name="button_TYPE_D_font_color" value="#FFFFFF">
                                            <input type="text" id="button_TYPE_D_font_color_text" placeholder="#FFFFFF" maxlength="7">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_D_font_size">字体大小</label>
                                        <input type="number" id="button_TYPE_D_font_size" name="button_TYPE_D_font_size" value="18" min="12" max="36" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="sound_TYPE_D">按钮音效</label>
                                        <input type="file" id="sound_TYPE_D" name="sound_TYPE_D" accept="audio/*">
                                        <div class="sound-preview">
                                            <audio id="sound-d-preview" class="sound-player" controls></audio>
                                            <button type="button" id="clear-sound-d" class="clear-sound">清除</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- E类按钮设置 -->
                                <div id="button-type-e-settings" class="button-type-settings">
                                    <h3>E类科学功能按钮</h3>
                                    
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="button_TYPE_E_use_image" name="button_TYPE_E_use_image">
                                        <label for="button_TYPE_E_use_image">使用按钮图片</label>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_E_pressed_image">按下状态图片</label>
                                        <input type="file" id="button_TYPE_E_pressed_image" name="button_TYPE_E_pressed_image" accept="image/*">
                                        <img id="button-e-pressed-preview" class="image-preview">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_E_released_image">释放状态图片</label>
                                        <input type="file" id="button_TYPE_E_released_image" name="button_TYPE_E_released_image" accept="image/*">
                                        <img id="button-e-released-preview" class="image-preview">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_E_pressed_color">按下状态颜色</label>
                                        <div class="color-input-group">
                                            <input type="color" id="button_TYPE_E_pressed_color" name="button_TYPE_E_pressed_color" value="#B0B0B0">
                                            <input type="text" id="button_TYPE_E_pressed_color_text" placeholder="#B0B0B0" maxlength="7">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_E_released_color">释放状态颜色</label>
                                        <div class="color-input-group">
                                            <input type="color" id="button_TYPE_E_released_color" name="button_TYPE_E_released_color" value="#C8C8C8">
                                            <input type="text" id="button_TYPE_E_released_color_text" placeholder="#C8C8C8" maxlength="7">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_E_font_color">字体颜色</label>
                                        <div class="color-input-group">
                                            <input type="color" id="button_TYPE_E_font_color" name="button_TYPE_E_font_color" value="#000000">
                                            <input type="text" id="button_TYPE_E_font_color_text" placeholder="#000000" maxlength="7">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_E_font_size">字体大小</label>
                                        <input type="number" id="button_TYPE_E_font_size" name="button_TYPE_E_font_size" value="16" min="12" max="36" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="sound_TYPE_E">按钮音效</label>
                                        <input type="file" id="sound_TYPE_E" name="sound_TYPE_E" accept="audio/*">
                                        <div class="sound-preview">
                                            <audio id="sound-e-preview" class="sound-player" controls></audio>
                                            <button type="button" id="clear-sound-e" class="clear-sound">清除</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- F类按钮设置 -->
                                <div id="button-type-f-settings" class="button-type-settings">
                                    <h3>F类科学计算器功能按钮</h3>
                                    
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="button_TYPE_F_use_image" name="button_TYPE_F_use_image">
                                        <label for="button_TYPE_F_use_image">使用按钮图片</label>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_F_pressed_image">按下状态图片</label>
                                        <input type="file" id="button_TYPE_F_pressed_image" name="button_TYPE_F_pressed_image" accept="image/*">
                                        <img id="button-f-pressed-preview" class="image-preview">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_F_released_image">释放状态图片</label>
                                        <input type="file" id="button_TYPE_F_released_image" name="button_TYPE_F_released_image" accept="image/*">
                                        <img id="button-f-released-preview" class="image-preview">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_F_pressed_color">按下状态颜色</label>
                                        <div class="color-input-group">
                                            <input type="color" id="button_TYPE_F_pressed_color" name="button_TYPE_F_pressed_color" value="#D0D0D0">
                                            <input type="text" id="button_TYPE_F_pressed_color_text" placeholder="#D0D0D0" maxlength="7">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_F_released_color">释放状态颜色</label>
                                        <div class="color-input-group">
                                            <input type="color" id="button_TYPE_F_released_color" name="button_TYPE_F_released_color" value="#E0E0E0">
                                            <input type="text" id="button_TYPE_F_released_color_text" placeholder="#E0E0E0" maxlength="7">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_F_font_color">字体颜色</label>
                                        <div class="color-input-group">
                                            <input type="color" id="button_TYPE_F_font_color" name="button_TYPE_F_font_color" value="#000000">
                                            <input type="text" id="button_TYPE_F_font_color_text" placeholder="#000000" maxlength="7">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_F_font_size">字体大小</label>
                                        <input type="number" id="button_TYPE_F_font_size" name="button_TYPE_F_font_size" value="18" min="12" max="36" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="sound_TYPE_F">按钮音效</label>
                                        <input type="file" id="sound_TYPE_F" name="sound_TYPE_F" accept="audio/*">
                                        <div class="sound-preview">
                                            <audio id="sound-f-preview" class="sound-player" controls></audio>
                                            <button type="button" id="clear-sound-f" class="clear-sound">清除</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- G类按钮设置 -->
                                <div id="button-type-g-settings" class="button-type-settings">
                                    <h3>G类科学计算器运算符按钮</h3>
                                    
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="button_TYPE_G_use_image" name="button_TYPE_G_use_image">
                                        <label for="button_TYPE_G_use_image">使用按钮图片</label>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_G_pressed_image">按下状态图片</label>
                                        <input type="file" id="button_TYPE_G_pressed_image" name="button_TYPE_G_pressed_image" accept="image/*">
                                        <img id="button-g-pressed-preview" class="image-preview">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_G_released_image">释放状态图片</label>
                                        <input type="file" id="button_TYPE_G_released_image" name="button_TYPE_G_released_image" accept="image/*">
                                        <img id="button-g-released-preview" class="image-preview">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_G_pressed_color">按下状态颜色</label>
                                        <div class="color-input-group">
                                            <input type="color" id="button_TYPE_G_pressed_color" name="button_TYPE_G_pressed_color" value="#4287f5">
                                            <input type="text" id="button_TYPE_G_pressed_color_text" placeholder="#4287f5" maxlength="7">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_G_released_color">释放状态颜色</label>
                                        <div class="color-input-group">
                                            <input type="color" id="button_TYPE_G_released_color" name="button_TYPE_G_released_color" value="#4a9af5">
                                            <input type="text" id="button_TYPE_G_released_color_text" placeholder="#4a9af5" maxlength="7">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_G_font_color">字体颜色</label>
                                        <div class="color-input-group">
                                            <input type="color" id="button_TYPE_G_font_color" name="button_TYPE_G_font_color" value="#FFFFFF">
                                            <input type="text" id="button_TYPE_G_font_color_text" placeholder="#FFFFFF" maxlength="7">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_G_font_size">字体大小</label>
                                        <input type="number" id="button_TYPE_G_font_size" name="button_TYPE_G_font_size" value="18" min="12" max="36" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="sound_TYPE_G">按钮音效</label>
                                        <input type="file" id="sound_TYPE_G" name="sound_TYPE_G" accept="audio/*">
                                        <div class="sound-preview">
                                            <audio id="sound-g-preview" class="sound-player" controls></audio>
                                            <button type="button" id="clear-sound-g" class="clear-sound">清除</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- H类按钮设置 -->
                                <div id="button-type-h-settings" class="button-type-settings">
                                    <h3>H类科学计算器数字按钮</h3>
                                    
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="button_TYPE_H_use_image" name="button_TYPE_H_use_image">
                                        <label for="button_TYPE_H_use_image">使用按钮图片</label>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_H_pressed_image">按下状态图片</label>
                                        <input type="file" id="button_TYPE_H_pressed_image" name="button_TYPE_H_pressed_image" accept="image/*">
                                        <img id="button-h-pressed-preview" class="image-preview">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_H_released_image">释放状态图片</label>
                                        <input type="file" id="button_TYPE_H_released_image" name="button_TYPE_H_released_image" accept="image/*">
                                        <img id="button-h-released-preview" class="image-preview">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_H_pressed_color">按下状态颜色</label>
                                        <div class="color-input-group">
                                            <input type="color" id="button_TYPE_H_pressed_color" name="button_TYPE_H_pressed_color" value="#E8E8E8">
                                            <input type="text" id="button_TYPE_H_pressed_color_text" placeholder="#E8E8E8" maxlength="7">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_H_released_color">释放状态颜色</label>
                                        <div class="color-input-group">
                                            <input type="color" id="button_TYPE_H_released_color" name="button_TYPE_H_released_color" value="#F8F8F8">
                                            <input type="text" id="button_TYPE_H_released_color_text" placeholder="#F8F8F8" maxlength="7">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_H_font_color">字体颜色</label>
                                        <div class="color-input-group">
                                            <input type="color" id="button_TYPE_H_font_color" name="button_TYPE_H_font_color" value="#000000">
                                            <input type="text" id="button_TYPE_H_font_color_text" placeholder="#000000" maxlength="7">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_H_font_size">字体大小</label>
                                        <input type="number" id="button_TYPE_H_font_size" name="button_TYPE_H_font_size" value="18" min="12" max="36" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="sound_TYPE_H">按钮音效</label>
                                        <input type="file" id="sound_TYPE_H" name="sound_TYPE_H" accept="audio/*">
                                        <div class="sound-preview">
                                            <audio id="sound-h-preview" class="sound-player" controls></audio>
                                            <button type="button" id="clear-sound-h" class="clear-sound">清除</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- I类按钮设置 -->
                                <div id="button-type-i-settings" class="button-type-settings">
                                    <h3>I类科学计算器等号按钮</h3>
                                    
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="button_TYPE_I_use_image" name="button_TYPE_I_use_image">
                                        <label for="button_TYPE_I_use_image">使用按钮图片</label>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_I_pressed_image">按下状态图片</label>
                                        <input type="file" id="button_TYPE_I_pressed_image" name="button_TYPE_I_pressed_image" accept="image/*">
                                        <img id="button-i-pressed-preview" class="image-preview">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_I_released_image">释放状态图片</label>
                                        <input type="file" id="button_TYPE_I_released_image" name="button_TYPE_I_released_image" accept="image/*">
                                        <img id="button-i-released-preview" class="image-preview">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_I_pressed_color">按下状态颜色</label>
                                        <div class="color-input-group">
                                            <input type="color" id="button_TYPE_I_pressed_color" name="button_TYPE_I_pressed_color" value="#ff9500">
                                            <input type="text" id="button_TYPE_I_pressed_color_text" placeholder="#ff9500" maxlength="7">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_I_released_color">释放状态颜色</label>
                                        <div class="color-input-group">
                                            <input type="color" id="button_TYPE_I_released_color" name="button_TYPE_I_released_color" value="#ffb444">
                                            <input type="text" id="button_TYPE_I_released_color_text" placeholder="#ffb444" maxlength="7">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_I_font_color">字体颜色</label>
                                        <div class="color-input-group">
                                            <input type="color" id="button_TYPE_I_font_color" name="button_TYPE_I_font_color" value="#FFFFFF">
                                            <input type="text" id="button_TYPE_I_font_color_text" placeholder="#FFFFFF" maxlength="7">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="button_TYPE_I_font_size">字体大小</label>
                                        <input type="number" id="button_TYPE_I_font_size" name="button_TYPE_I_font_size" value="18" min="12" max="36" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="sound_TYPE_I">按钮音效</label>
                                        <input type="file" id="sound_TYPE_I" name="sound_TYPE_I" accept="audio/*">
                                        <div class="sound-preview">
                                            <audio id="sound-i-preview" class="sound-player" controls></audio>
                                            <button type="button" id="clear-sound-i" class="clear-sound">清除</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="step-buttons">
                                    <button type="button" class="btn prev-step" data-prev="result-area-step">上一步</button>
                                    <button type="button" class="btn next-step" data-next="tabbar-settings-step">保存并继续</button>
                                </div>
                            </div>
                            
                            <!-- 步骤6: TabBar设置 -->
                            <div id="tabbar-settings-step" class="step-content">
                                <!-- TabBar背景设置 -->
                                <div class="form-group">
                                    <label>TabBar背景设置</label>
                                    <div class="radio-group">
                                        <div class="radio-item">
                                            <input type="radio" id="tabbar_bg_color_option" name="tabbar_bg_type" value="color" checked>
                                            <label for="tabbar_bg_color_option">使用背景颜色</label>
                                        </div>
                                        <div class="radio-item">
                                            <input type="radio" id="tabbar_bg_image_option" name="tabbar_bg_type" value="image">
                                            <label for="tabbar_bg_image_option">使用背景图片</label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-group" id="tabbar_bg_color_group">
                                    <label for="tabbar_background_color">TabBar背景颜色</label>
                                    <div class="color-input-group">
                                        <input type="color" id="tabbar_background_color" name="tabbar_background_color" value="#FFFFFF">
                                        <input type="text" id="tabbar_background_color_text" placeholder="#FFFFFF" maxlength="7">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="tabbar_opacity">背景透明度</label>
                                    <input type="range" id="tabbar_opacity" name="tabbar_opacity" min="0" max="1" step="0.1" value="1">
                                    <span id="tabbar_opacity_value">1</span>
                                </div>
                                
                                <div class="form-group" id="tabbar_bg_image_group" style="display: none;">
                                    <label for="tabbar_background_image">TabBar背景图片</label>
                                    <input type="file" id="tabbar_background_image" name="tabbar_background_image" accept="image/*">
                                    <img id="tabbar-background-preview" class="image-preview">
                                </div>
                                
                                <div class="form-group">
                                    <label for="tabbar_font_color">字体颜色</label>
                                    <div class="color-input-group">
                                        <input type="color" id="tabbar_font_color" name="tabbar_font_color" value="#000000">
                                        <input type="text" id="tabbar_font_color_text" placeholder="#000000" maxlength="7">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="tabbar_font_size">字体大小</label>
                                    <input type="number" id="tabbar_font_size" name="tabbar_font_size" value="12" min="10" max="18">
                                </div>
                                
                                <h4>TabBar图标设置</h4>
                                
                                <!-- 首页图标 -->
                                <div class="tabbar-icon-group">
                                    <h5>首页图标</h5>
                                    <div class="form-group">
                                        <label for="tabbar_home_selected">选中状态图片</label>
                                        <input type="file" id="tabbar_home_selected" name="tabbar_home_selected" accept="image/*">
                                        <img id="tabbar-home-selected-preview" class="image-preview">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="tabbar_home_unselected">未选中状态图片</label>
                                        <input type="file" id="tabbar_home_unselected" name="tabbar_home_unselected" accept="image/*">
                                        <img id="tabbar-home-unselected-preview" class="image-preview">
                                    </div>
                                </div>
                                
                                <!-- 拍照图标 -->
                                <div class="tabbar-icon-group">
                                    <h5>拍照图标</h5>
                                    <div class="form-group">
                                        <label for="tabbar_camera_selected">选中状态图片</label>
                                        <input type="file" id="tabbar_camera_selected" name="tabbar_camera_selected" accept="image/*">
                                        <img id="tabbar-camera-selected-preview" class="image-preview">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="tabbar_camera_unselected">未选中状态图片</label>
                                        <input type="file" id="tabbar_camera_unselected" name="tabbar_camera_unselected" accept="image/*">
                                        <img id="tabbar-camera-unselected-preview" class="image-preview">
                                    </div>
                                </div>
                                
                                <!-- 语音图标 -->
                                <div class="tabbar-icon-group">
                                    <h5>语音图标</h5>
                                    <div class="form-group">
                                        <label for="tabbar_voice_selected">选中状态图片</label>
                                        <input type="file" id="tabbar_voice_selected" name="tabbar_voice_selected" accept="image/*">
                                        <img id="tabbar-voice-selected-preview" class="image-preview">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="tabbar_voice_unselected">未选中状态图片</label>
                                        <input type="file" id="tabbar_voice_unselected" name="tabbar_voice_unselected" accept="image/*">
                                        <img id="tabbar-voice-unselected-preview" class="image-preview">
                                    </div>
                                </div>
                                
                                <!-- 主题图标 -->
                                <div class="tabbar-icon-group">
                                    <h5>主题图标</h5>
                                    <div class="form-group">
                                        <label for="tabbar_theme_selected">选中状态图片</label>
                                        <input type="file" id="tabbar_theme_selected" name="tabbar_theme_selected" accept="image/*">
                                        <img id="tabbar-theme-selected-preview" class="image-preview">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="tabbar_theme_unselected">未选中状态图片</label>
                                        <input type="file" id="tabbar_theme_unselected" name="tabbar_theme_unselected" accept="image/*">
                                        <img id="tabbar-theme-unselected-preview" class="image-preview">
                                    </div>
                                </div>
                                
                                <!-- 个人中心图标 -->
                                <div class="tabbar-icon-group">
                                    <h5>个人中心图标</h5>
                                    <div class="form-group">
                                        <label for="tabbar_profile_selected">选中状态图片</label>
                                        <input type="file" id="tabbar_profile_selected" name="tabbar_profile_selected" accept="image/*">
                                        <img id="tabbar-profile-selected-preview" class="image-preview">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="tabbar_profile_unselected">未选中状态图片</label>
                                        <input type="file" id="tabbar_profile_unselected" name="tabbar_profile_unselected" accept="image/*">
                                        <img id="tabbar-profile-unselected-preview" class="image-preview">
                                    </div>
                                </div>
                                
                                <div class="step-buttons">
                                    <button type="button" class="btn prev-step" data-prev="button-skins-step">上一步</button>
                                    <button type="button" class="btn next-step" data-next="summary-step">保存并继续</button>
                                </div>
                            </div>
                            
                            <!-- 步骤7: 确认提交 -->
                            <div id="summary-step" class="step-content">
                                <h3>主题信息确认</h3>
                                <p>请确认以下主题信息，检查无误后提交。</p>
                                
                                <div class="theme-summary">
                                    <!-- 基本信息摘要 -->
                                    <div class="summary-section">
                                        <div class="summary-header">基本信息</div>
                                        <div class="summary-content">
                                            <div class="summary-item">
                                                <div class="summary-label">主题名称:</div>
                                                <div class="summary-value" id="summary-skin-name"></div>
                                            </div>
                                            <div class="summary-item">
                                                <div class="summary-label">版本号:</div>
                                                <div class="summary-value" id="summary-version"></div>
                                            </div>
                                            <div class="summary-item">
                                                <div class="summary-label">付费状态:</div>
                                                <div class="summary-value" id="summary-is-paid"></div>
                                            </div>
                                            <div class="summary-item">
                                                <div class="summary-label">详情图片:</div>
                                                <div class="summary-value">
                                                    <img id="summary-detail-image" class="preview-image">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- 全局设置摘要 -->
                                    <div class="summary-section">
                                        <div class="summary-header">全局设置</div>
                                        <div class="summary-content">
                                            <div class="summary-item">
                                                <div class="summary-label">背景设置类型:</div>
                                                <div class="summary-value" id="summary-global-bg-type"></div>
                                            </div>
                                            <div class="summary-item" id="summary-global-bg-color-item">
                                                <div class="summary-label">背景颜色:</div>
                                                <div class="summary-value" id="summary-global-bg-color"></div>
                                            </div>
                                            <div class="summary-item" id="summary-global-bg-image-item">
                                                <div class="summary-label">背景图片:</div>
                                                <div class="summary-value">
                                                    <img id="summary-global-bg-image" class="preview-image">
                                                </div>
                                            </div>
                                            <div class="summary-item">
                                                <div class="summary-label">使用系统字体:</div>
                                                <div class="summary-value" id="summary-use-system-font"></div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- 顶部导航区设置摘要 -->
                                    <div class="summary-section">
                                        <div class="summary-header">顶部导航区设置</div>
                                        <div class="summary-content">
                                            <div class="summary-item">
                                                <div class="summary-label">导航选中颜色:</div>
                                                <div class="summary-value" id="summary-top-nav-selected-color"></div>
                                            </div>
                                            <div class="summary-item">
                                                <div class="summary-label">导航未选中颜色:</div>
                                                <div class="summary-value" id="summary-top-nav-unselected-color"></div>
                                            </div>
                                            <div class="summary-item">
                                                <div class="summary-label">文字选中颜色:</div>
                                                <div class="summary-value" id="summary-top-nav-text-selected-color"></div>
                                            </div>
                                            <div class="summary-item">
                                                <div class="summary-label">文字未选中颜色:</div>
                                                <div class="summary-value" id="summary-top-nav-text-unselected-color"></div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- 计算结果区设置摘要 -->
                                    <div class="summary-section">
                                        <div class="summary-header">计算结果区设置</div>
                                        <div class="summary-content">
                                            <div class="summary-item">
                                                <div class="summary-label">背景设置类型:</div>
                                                <div class="summary-value" id="summary-result-bg-type"></div>
                                            </div>
                                            <div class="summary-item" id="summary-result-bg-color-item">
                                                <div class="summary-label">背景颜色:</div>
                                                <div class="summary-value" id="summary-result-bg-color"></div>
                                            </div>
                                            <div class="summary-item" id="summary-result-bg-image-item">
                                                <div class="summary-label">背景图片:</div>
                                                <div class="summary-value">
                                                    <img id="summary-result-bg-image" class="preview-image">
                                                </div>
                                            </div>
                                            <div class="summary-item">
                                                <div class="summary-label">字体颜色:</div>
                                                <div class="summary-value" id="summary-result-font-color"></div>
                                            </div>
                                            <div class="summary-item">
                                                <div class="summary-label">字体大小:</div>
                                                <div class="summary-value" id="summary-result-font-size"></div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- 按钮皮肤设置摘要 -->
                                    <div class="summary-section">
                                        <div class="summary-header">按钮皮肤设置</div>
                                        <div class="summary-content" id="summary-button-skins">
                                            <!-- 按钮皮肤详细信息将通过JavaScript动态添加 -->
                                            <div id="summary-button-types-details"></div>
                                            <h5>已配置按钮类型：</h5>
                                            <ul id="summary-button-types-list"></ul>
                                        </div>
                                    </div>
                                    
                                    <!-- TabBar设置摘要 -->
                                    <div class="summary-section">
                                        <div class="summary-header">TabBar设置</div>
                                        <div class="summary-content">
                                            <div class="summary-item">
                                                <div class="summary-label">背景设置类型:</div>
                                                <div class="summary-value" id="summary-tabbar-bg-type"></div>
                                            </div>
                                            <div class="summary-item" id="summary-tabbar-bg-color-item">
                                                <div class="summary-label">背景颜色:</div>
                                                <div class="summary-value" id="summary-tabbar-bg-color"></div>
                                            </div>
                                            <div class="summary-item">
                                                <div class="summary-label">背景透明度:</div>
                                                <div class="summary-value" id="summary-tabbar-opacity"></div>
                                            </div>
                                            <div class="summary-item" id="summary-tabbar-bg-image-item">
                                                <div class="summary-label">背景图片:</div>
                                                <div class="summary-value">
                                                    <img id="summary-tabbar-bg-image" class="preview-image">
                                                </div>
                                            </div>
                                            <div class="summary-item">
                                                <div class="summary-label">字体颜色:</div>
                                                <div class="summary-value" id="summary-tabbar-font-color"></div>
                                            </div>
                                            <div class="summary-item">
                                                <div class="summary-label">字体大小:</div>
                                                <div class="summary-value" id="summary-tabbar-font-size"></div>
                                            </div>
                                            
                                            <!-- TabBar图标摘要 -->
                                            <div class="summary-item">
                                                <div class="summary-label">TabBar图标:</div>
                                                <div class="summary-value">
                                                    <div class="summary-tabbar-icons" id="summary-tabbar-icons">
                                                        <!-- 图标摘要将由JavaScript动态添加 -->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="step-buttons">
                                    <button type="button" class="btn prev-step" data-prev="tabbar-settings-step">上一步</button>
                                    <button type="submit" class="btn submit-btn" id="submit-theme-button">确认提交</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 脚本 -->
    <script src="js/api.js"></script>
    <script src="js/main.js"></script>
    <script src="js/theme-fixes.js"></script>
    
    <script>
        // 页面导航和表单处理
        document.addEventListener('DOMContentLoaded', () => {
            // 各种函数和初始化代码
            
            // 在"确认提交"按钮点击事件前添加表单验证函数
            async function validateAndSubmitForm(e) {
                e.preventDefault();
                
                // 确保所有必填的数字输入框有值
                const numberInputs = document.querySelectorAll('input[type="number"][required]');
                let allValid = true;
                
                // 检查每个必填的数字输入框
                numberInputs.forEach(input => {
                    if (!input.value) {
                        input.value = input.getAttribute('value') || '';
                        
                        // 如果仍然没有值，标记表单为无效
                        if (!input.value) {
                            allValid = false;
                            console.error(`表单验证失败：${input.name} 是必填字段`);
                        }
                    }
                });
                
                // 如果表单无效，显示错误消息
                if (!allValid) {
                    const messageElement = document.getElementById('message');
                    messageElement.textContent = '表单验证失败：请确保所有必填字段都已填写完整';
                    messageElement.className = 'message error';
                    messageElement.style.display = 'block';
                    return;
                }
                
                // 如果表单验证通过，提交表单
                await submitThemeForm();
            }
            
            // 更新表单提交处理代码，将验证和提交逻辑连接起来
            const submitButton = document.getElementById('submit-theme-button');
            if (submitButton) {
                submitButton.addEventListener('click', validateAndSubmitForm);
            }
        });
    </script>
</body>
</html> 